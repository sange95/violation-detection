version: '3.8'

services:
  vllm-show:
    build: .
    container_name: vllm-show
    restart: unless-stopped
    ports:
      - "8080:8080"  # 文件服务器端口
      - "8081:8081"  # API服务器端口
    environment:
      # VLLM配置（必需）
      - VLLM_BASE_URL=http://host.docker.internal:8001
      
      # 文件服务器配置（可选）
      - FILE_SERVER_PORT=8080
      - FILE_SERVER_PATH=/app/uploads
      - FILE_SERVER_HOST=localhost:8080
      
      # API服务器配置（可选）
      - API_SERVER_PORT=8081
      
      # VLLM其他配置（可选）
      - VLLM_MODEL=
      - VLLM_PROMPT=请检测该图片中内容。
    volumes:
      # 挂载上传目录，持久化存储
      - ./uploads:/app/uploads
    networks:
      - vllm-network

networks:
  vllm-network:
    driver: bridge

